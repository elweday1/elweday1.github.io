---

import { slugifyStr } from "@utils/slugify";
import Datetime from "./Datetime";
import type { CollectionEntry } from "astro:content";
import { Image } from "astro-preload/components";


export interface Props {
  href?: string;
  frontmatter: CollectionEntry<"blog">["data"];
}


const { frontmatter: {title, pubDatetime, description, cover}, href } = Astro.props;

const isCoverRelative = cover.startsWith("/");




---
<li class="flex flex-row p-3 bg-skin-fill rounded-lg  h-full ">
    <div class=" flex flex-col justify-between text-wrap w-full">

    {isCoverRelative? 
    
    <img 
      style={{ viewTransitionName: slugifyStr(title)+":image" }}
      class="" src={cover}  alt="" />
    :
    <Image
        transition:name={slugifyStr(title)+":image"}
        width={300}
        height={300}
        url={cover}
        class=" rounded-2xl w-full p-2 aspect-video  object-cover"
        alt=""
      />

    }


      <a transition:name={slugifyStr(title)}   href={href}   class="py-1 text-wrap text-xl origin-top-left font-medium text-skin-accent underline-offset-4 focus-visible:no-underline focus-visible:underline-offset-0   hover:underline" >{title}</a>
      <p class="">{description}</p>
      <Datetime className="scale-90 origin-bottom-left mt-auto  " datetime={pubDatetime} />
    </div>
  </li>